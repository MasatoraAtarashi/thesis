\chapter{序論}
\label{chap:introduction}

\section{背景}
\label{section:background}

今日、World Wide Webは静的な文書の配信のみならず、動的なアプリケーション・プラットフォームとしても広く用いられている。

Webにおけるアプリケーションの配信・実行を支援する技術の一つに、WebAssemblyがある。
WebAssemblyは、Google、Microsoft、MozillaおよびAppleの主導によって開発された仮想命令セットである\cite{webassembly}。
従来、WebブラウザにおいてはECMAScript（JavaScript）が事実上唯一の標準化された実行形式であった。
しかし、ECMAScriptはスクリプト言語として設計された言語であり\cite{ecma2018}、プログラムサイズやソースコードのパースを含めた実行速度においてオーバーヘッドがある。
WebAssemblyは、プログラムの実行前に別のホストからダウンロードされることを想定して、実行ファイルのサイズが可能な限り小さくなるように設計されている。
また、実行ファイル全体がダウンロードされるのを待つことなく逐次的に実行することも可能であり、直ちに必要としない部分の読み込みは遅延させたり並列化させたりすることができる。

このWebAssemblyを実行形式として選択できるソフトウェア開発環境は増えつつある。
コンパイラ基盤であるLLVMが試験的にWebAssemblyをコンパイルターゲットとして対応した\cite{}ことにより、C言語/C++言語や、Rust言語\cite{rust_wasm}からWebAssemblyへコンパイルすることが可能になった。
また、Go言語はLLVMとは独立にWebAssemblyをコンパイルターゲットとして対応した\cite{go_wasm}。
プログラミング言語やライブラリにおけるWebAssembly対応が広がることで、多様な開発環境を用いて開発したプログラムをWebブラウザ上で高速かつ安全に実行できるようになる。

また、WebAssemblyプログラムを実行するための環境として主に想定されているのはWebブラウザだが、WebAssemblyの設計自体にはWebブラウザに限定された仕様は含まれておらず、Webブラウザ外への応用も想定されている。
例えば、（Ethereum flavored WebAssembly）

非Webブラウザ環境でも実行環境としてWebAssemblyを用いることで、実行に必要なプログラムを適宜ダウンロードしてサンドボックス内で実行するというWebにおける実行モデルを、幅広い環境に適用することができる。

\section{本研究が着目する課題}

WebAssemblyは非Webブラウザ環境での実行も想定して設計されているため、Webブラウザのような多機能なソフトウェアを動作させることが難しい、計算資源が限られた環境に応用することも可能である。
しかし、マイコンなどにおけるWebAssemblyの応用可能性は十分に検証されていない。

接続した端末に直接プログラムを書き込むことが一般的であるマイコンにおいて、WebAssembly実行環境があれば、マイコン上で動作するプログラムをWebからダウンロードして実行することが可能になり、利便性が向上する。

\section{本研究の目的とアプローチ}

本研究では前述の課題を解決するため、マイコンのような計算資源が限られた環境下でもWebAssemblyバイナリが実行できることを示し、Webを用いたソフトウェアの配布およびアップデートが可能であることを示す。

そのために、本研究ではマイコン上でWebAssemblyバイナリの取得、実行および更新を行うための実行環境を設計した。
また、その実現可能性を示すため、ESP32マイコン上にWebAssemblyバイナリのインタプリタを実装し、性能を評価した。

\section{本論文の構成}

本論文における以降の構成は次の通りである。

\ref{chap:related_works}章では、マイコンにおけるプログラムの更新を行うための関連技術として、MicroPython、ESP-IDFが提供するOTA機能およびAmazon FreeRTOSが提供するOTA機能について述べる。

\ref{chap:design}章では、マイコン上でWebAssemblyプログラムを取得、実行、更新するための実行環境の設計を提案する。提案する実行環境では、プログラムをHTTP通信を用いてインターネット上から取得する。プログラムは実行毎に再取得することで更新しつつ、キャッシュの活用により通信による計算負荷と帯域を削減する。

\ref{chap:implementation}章では、本研究で実装したWebAssembly実行環境について述べる。
本研究では、WebAssemblyバイナリの実行部分を実装した。ホストプログラムから静的なバイナリをパースおよびインスタンス化し、対応する関数を呼び出すことで実行する。

\ref{chap:evaluation}章では、本研究で実装したWebAssembly実行環境について、同一の内容の関数をネイティブに実行した場合と比較し、実行速度およびメモリフットプリントにおけるオーバーヘッドについて考察する。

\ref{chap:conclusion}章では、本研究における結論を示す。
